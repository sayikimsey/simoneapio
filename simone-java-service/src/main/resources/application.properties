# Spring Boot Server Konfiguration
server.port=8081
# Definiert den Port, auf dem der Spring Boot Server läuft.
# Dieser Port ist entscheidend für die Erreichbarkeit der Anwendung.

# ===================================================================
# BEREINIGTE: SIMONE Remote API Konfiguration für den Java Service
# WICHTIG: Diese Pfade müssen die Dateisystemstruktur auf dem 
# Windows Server (SIMONE API Server) widerspiegeln, da Remote API 
# verwendet wird.
# ===================================================================

# 1. Pfad zur Remote API Native Library (.so) auf der Linux VM.
# (Wird in SimoneApiConfig.java verwendet)
simone.api.library.path=/opt/simone/Simone-V6_37/shlib/libSimoneRemoteApiJava64.so

simone.base-path=C:\Simone\Simone-V6_37
# Definiert den grundlegenden Installationspfad der SIMONE-Software auf dem Windows Server.

simone.installation.path=C:\Simone\Simone-V6_37
# Spezifiziert den vollständigen Installationspfad der SIMONE-Software auf dem Windows Server.

simone.default.network.directory=C:\Simone\Simone-V6_37\Nets
# Legt das Standardverzeichnis für die Netzwerkdateien auf dem Windows Server fest.

simone.default.config.file.path=C:\Simone\Simone-V6_37\sys\api_server.INI
# Definiert den Pfad zur Standard-Konfigurationsdatei (api.ini) auf dem Windows Server,
# die für die simone_init()-Funktion verwendet wird.


# ===================================================================
# Diese Eigenschaften werden von der SamlProperties-Klasse gebunden.
# Die Werte können direkt hier gesetzt oder über Umgebungsvariablen überschrieben werden.
# Z.B. 'SIMONE_SAML_IDP_ENTITYID=https://your.entity.id'
# ===================================================================

# IdP (Azure AD) Details:
# Die Entitäts-ID des Azure AD Identitätsanbieters.
# Muss mit dem "Microsoft Entra-Bezeichner" in Azure AD übereinstimmen
simone.saml.idp.entity-id=${SIMONE_SAML_IDP_ENTITYID:https://sts.windows.net/fd0ee46b-a18b-4741-9d59-65ab9ea24756/}

# Die Single Sign-On (SSO) URL des Azure AD Identitätsanbieters.
# Dies ist der Endpunkt, an den Authentifizierungsanfragen gesendet werden.
# Muss mit der "URL für Anmeldung" in Azure AD übereinstimmen.
simone.saml.idp.single-sign-on-service-location=${SIMONE_SAML_IDP_SSO_URL:https://login.microsoftonline.com/fd0ee46b-a18b-4741-9d59-65ab9ea24756/saml2}

# Der Classpath-Pfad zum öffentlichen Zertifikat von Azure AD (IdP).
# Dieses Zertifikat wird zur Verifizierung der digitalen Signaturen von Azure AD verwendet.
# Die Datei 'azure_ad_saml_certificate_prod_gascade.cer' muss unter 'src/main/resources' liegen.
simone.saml.idp.verification-certificate-location=${SIMONE_SAML_IDP_VERIFICATION_CERT_LOCATION:classpath:azure_ad_saml_certificate_prod_gascade.cer}


# SP Signatur-Details:
# Der Classpath-Pfad zur Keystore-Datei des Service Providers.
# Diese Datei enthält den privaten Schlüssel und das Zertifikat der Anwendung zum Signieren.
simone.saml.idp.signing-keystore-location=${SIMONE_SAML_SP_KEYSTORE_LOCATION:classpath:simone-saml.p12}

# ✅ NEU: Die Entitäts-ID des Service Providers (Ihrer Anwendung).
# Dieser Wert MUSS exakt mit dem "Bezeichner (Entitäts-ID)" in Azure AD übereinstimmen.
simone.saml.idp.sp-entity-id=https://simoneapi.gascade.de/simone-api-java

server.forward-headers-strategy=framework
# Das Passwort für den Zugriff auf die Keystore-Datei des Service Providers.
# Dies ist ein sensibles Geheimnis und sollte idealerweise als Umgebungsvariable gesetzt werden.
simone.saml.idp.signing-keystore-password=${SIMONE_SAML_SP_KEYSTORE_PASSWORD:SimoneApi}

# Der Aliasname des privaten Schlüssels und Zertifikats im Keystore.
# Dies muss genau mit dem Alias übereinstimmen, der bei der Erstellung des Keystores verwendet wurde.
simone.saml.idp.signing-key-alias=${SIMONE_SAML_SP_KEY_ALIAS:te-aff02484-73a8-42a7-9672-787040fad1f8}

# Der Typ des Keystores (z.B. PKCS12 oder JKS).
simone.saml.idp.signing-keystore-type=${SIMONE_SAML_SP_KEYSTORE_TYPE:PKCS12}


# ===================================================================
# LOGGING-KONFIGURATION FÜR DEBUGGING VON SAML
# detaillierte SAML-Logs für dev (für Produktion wird entfernt).
# ===================================================================
logging.level.org.springframework.security.saml2=DEBUG
logging.level.org.opensaml=DEBUG
logging.level.org.springframework.security.web=DEBUG


# ===================================================================
# Zusätzliche Konfigurationen
# ===================================================================

# URL des Node.js Backends für die Umleitung nach erfolgreicher SAML-Authentifizierung.
# Dies ist die Basis-URL des Node.js Backends, die vom Load Balancer aus sichtbar ist.
node.backend.url=${NODE_BACKEND_URL:https://simoneapi.gascade.de/api/simone}
server.servlet.context-path=/simone-api-java


java.simone.url=${SIMONE_JAVA_SERVICE_URL:https://simoneapi.gascade.de/simone-api-java}
#java.simone.url="https//simoneapi.gascade.de/simone-api-java"
# Simone API License Server Configuration
simone.license.server.host=winsimone01.gascadead.gascade.de
simone.license.server.port=6612


# simone.saml.keystore.password=SimoneApi

# ... (Vorhandene Konfigurationen) ...

# ===================================================================
# ✅ Entfernt: Interne API-Schlüssel-Konfiguration für die Backend-zu-Backend-Authentifizierung.
# Dieser Schlüssel wird nicht mehr benötigt, da die Filterung im Java-Dienst deaktiviert wird.

# simone.internal-api-key=${SIMONE_INTERNAL_API_KEY:YOUR_SUPER_SECRET_INTERNAL_API_KEY_HERE}

# Der Name des HTTP-Headers, der den internen API-Schlüssel enthielt.
# simone.internal-api-header-name=X-Internal-Auth-Key

# ===================================================================
# ✅ Entfernt: LOGGING-KONFIGURATION FÜR DEBUGGING DES INTERNEN API-KEY-FILTERS.
# logging.level.com.gascade.simone.config.InternalApiKeyAuthFilter=DEBUG

# Required so browser sends JSESSIONID when Azure POSTS the SAMLResponse
server.servlet.session.cookie.same-site=none
# In prod (HTTPS), Secure MUST be true
server.servlet.session.cookie.secure=true

server.servlet.session.cookie.path=/api/simone